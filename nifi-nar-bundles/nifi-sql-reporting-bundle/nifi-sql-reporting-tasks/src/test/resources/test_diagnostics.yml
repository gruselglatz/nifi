
---
name: "Connection Assessment"
rules:
  - name: "Queue Size"
    description: "Queue size check greater than 50"
    priority: 1
    condition: "predictedQueuedCount > 50"
    actions:
      - type: "LOG"
        attributes:
          logLevel: "DEBUG"
          message: "Queue Size Over 50 is detected!"
  - name: "Time To Back Pressure"
    description: "Back pressure time less than 5 minutes"
    priority: 2
    condition: "predictedTimeToBytesBackpressureMillis < 300000"
    actions:
      - type: "LOG"
        attributes:
          logLevel: "INFO"
          message: "Back Pressure prediction less than 5 minutes!"
      - type: "ALERT"
        attributes:
          severity: "INFO"
          message: "Back Pressure prediction less than 5 minutes!"
metrics:
  values:
    - "connectionId"
    - "predictedQueuedCount"
    - "predictedTimeToBytesBackpressureMillis"
  query: "select connectionId, predictedQueuedCount, predictedTimeToBytesBackpressureMillis from CONNECTION_STATUS_PREDICTIONS"
---
name: "Connection Assessment of Concern"
rules:
  - name: "Queue Size"
    description: "Queue size check greater than 1000"
    priority: 1
    condition: "predictedQueuedCount == 1000"
    actions:
      - type: "LOG"
        attributes:
          logLevel: "DEBUG"
          message: "Queue Size Over 1000 is detected!"
  - name: "Time To Back Pressure"
    description: "Back pressure time plenty of time"
    priority: 2
    condition: "predictedTimeToBytesBackpressureMillis > 100000000"
    actions:
      - type: "LOG"
        attributes:
          logLevel: "DEBUG"
          message: "Back Pressure no time soon, relax"
metrics:
  values:
    - "connectionId"
    - "predictedQueuedCount"
    - "predictedTimeToBytesBackpressureMillis"
  query: "select connectionId, predictedQueuedCount, predictedTimeToBytesBackpressureMillis from CONNECTION_STATUS_PREDICTIONS"